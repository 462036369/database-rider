dist: trusty
sudo: required
language: java
jdk: oraclejdk8
cache:
  directories:
  - "$HOME/.m2/repository"
services:
- docker
env:
  git:
  - secure: AaD509pji2v/HaA0qYmja2BdZtlZZ3bB1F388lL13hny6ziMFAHu5MV7Hp2bOhXqAlYhNJMUtJDsjygZWjdVbM5UOH/ymFkeQck8kMD9rlwbxtsIZTeWZLZUZuIF/PwYx5+UVVMdlPBCOpdmD5hg4a+A2x1y6ORLCGxBOWryr6VMl38ICahN4z8xJjW7hvogWs9wlX6XaPaG6j1rpvIELyp/RR74bvpg6qCsAKXsfhxIFYgBSQal+mOKXDKOAy/klkbEGMDQjHtUbF6wXdKvkLSpQzcTVt5dGqINgyWKmmd1an4o2gKy0aKybXCaaLf87OnIqzVyb/mRRslaMz2XaYHSUjbEl4tZS/Qj5+sKmKmq+v13eaQPcX0LbuvBgqMMr1suaB5/pqceb5DGyNjGAnU9IhXrlTEQptG7dxnN0yay3kCRT6o1jGu6f7bMkkmQ7SWTUckRVIsdVlRxVyur1rWkUq8zdzQTp9hQ+nTlixqoz/bqoKSZAiC+sFoAgV9O1sOe9Bhuf+I/mKuZurUJWQYO7WTbJReCt5mFziXfTrJsUPhiDxlT9T8G8nmZs/yS3imzQlLoI3P3X8DTnJ+n9lMSSnz0jL6ylObokGGlSUcVisKldbahT7xPCXFdAayYx35kqT10Y1siunTUQSfxHipPFaeacANdbnTa2uIaNXY=
  - secure: lCqKj+I2tZ6W4WrQg8nUhnMgusoJIay9tX//2gyRJmXShS7u7uzluPQA8OoYnFc+nKN5mR90qqNc7XCBj2MxFoDcP8JtIYJAsAL2Lj2YWsPH3KNZgbaakB8hAXu1pSbgcJnhBLyaIn9pTHZy+bMhoSf/qtSFLbJxoUWyIoL1/irwR2qdO6tuaB251bibrMw1Hm+ucsOF9853YskqvtKhUvqLWF3wM7o5DRrGLmBwQf6DD0u6MAzmmiEzr7PMjiHuTWUwyEjBKLXO11DUKuPaAH4uNJmxlr7AzfAR0pDFyQvI9+iH4wF6/3lp6hidOs2olmKNrWOkv86cN24fpLn0gKvPuwutGVmcc6E5+vWIhpm58DveQZc02NrqM+Me18GHVZQRw+1MNS4SfiyZFr8nyyg1jFDW41dwcY30UDKFtX01b5mu0iG/JW/7pX1x09t3Hqiot6U7cdMIVnWxuCiEd3lyN7wjf4ZuR4iMjKi11MsQiUxT7CTvRaqCFrLKQfpNAHYIbB8rVM53ZCdknTJ+t82oNfC+Kw0/WLtvUgN0vZvnIN9CuFdUv16/MrBNfdhlwibrsmv8tIWCLPE+6vDdBqsOeFRt28ZFPimdkl3YRGADQ9Y8CEIfxnLUXWH7geN0XbJLW23xghde3vowy7xKi1At/eKsuytJj9OtA5lNJB4=
  global:
  - secure: L0+cMc+bX+VRvSdu6FtZ05zpwI01I4zelMBARKfFgoBPWI/n7NiekeEDmlDLTuJFs/umemi71JF30bBLCFeY9ZpHdVfRrHt6i/NHeyH3Ex0C4TOhRPQS7fPT7MKVTkgmKMJRm5MpoqdpKEJvyk2N7KOzuLJXmCZL60MUTbdbu1cZ2WldNlvQX6nApV8P/rISD/OFxQBszyfaJFhOWsgvC9R9tlhcDjTPoqjxdaQx04LmW686s80MhEwvkwYxKJtz+KD1NHFrReXnKcHdvQ50+dcn8JgDfRrw52Th+zEiNwqzVKxh2diw/J8T/NHFxmiKNbni3XB6ZnXWzysB3ZFid79H0JAfR36ZPj6P2ny7Qd1HhFDpgd0+DmKZ/zeOHWD1w/l8N6RzSkx+m5rMwtlCYpM3wBxNeu10KT1Y5Nw4i1ZM8gKjkj8zQ4OAHCp5i/BCDkWTIqM32peWt+BQj0nGUo1a8DdVPAYt0wVPSwV9LjRr5fb3vh5ScZ+PDwIdMORky0DjUo6Zi7ObxSgXlCAROF6SvVsCjOF38G3AVV0S4hjC3I8F1QGvfi1CUtxAcZjaj++tAXlSmA9PVrrTl/8AzQJgSb9uSxNzBaflfayM3KS6ZGHKJTJSdaD305nuoGk1OBG5AZ5c6bJSRIxIPEfvZddwGUepNtFcfJW89HambfM=
  - secure: ClumGGkzurMUY4zDqxieYIER4RCI5TmkQs1qCDA8wGfdJYYwwF3+a1nzwF0nemk6eSVUeKjzrGv5H5pRlkVbXCt3C3OYSjhl9T+dVDXt8aAAu5K3xR0CZL/dEMM4Md5d94SHUa2yyg9P954CSgRUb+eb99B+v8PIzAXkIsW3bjOQ03tCq5CZtmQU388BrTr7liNoA3Mh2053OHdxAxvMBY8dAyFCuwF2TTNk8bKvOL0ed4caNKCPMvlil907flXpDKkkXzFCoo3Mo2UDi5VAZFSxRWHi9PrdV7x4tPQs4fBZaAaIOEbTpnjKItMZLs1CMH7l7ekLGZuYanq1hMH/LilUxBqziDT4JF9CfPdnTQGBdsUjH3ErE1ClQHsiRECc/9rE1nYRBLxwB9JCDDz0lUSU2zOKaQloBnfgK+aaQm1u3kk9GqQ85Yzvn7QTjSmatBqlBy/xNCpTUVhB0jGDr867hfD09M8YboyKMs7XN3nX/YQpW8wsgTNOO2yFhFfD+UHaR9QmYqXkXhxU3km3jJOaHcWqdeZu7fx4ocd9nAnn36xE3Q9mpb1W+sbFmiNOocuX7dEAYk44rNOtGoZBb8T7xnGdUwoFq7A8DGflo8x+6msHRqWORQtpfWZDUAViAL1V7WJVxzgA+Paxq40gWXJ38oNV3HJXbmKT4eUvRjY=
  sonar:
    secure: e22zTRb0hgWikshCzqnM7iBzDTnNIDLVZ8/XoSbhu6b9PLdmXvnwvpGnZvpSQVhu7q3lVEmQVn3h5Lnzj5sPphOz0c8sI0uWp8Sg6xYGfzWf8PhWo+VkZaKkSsArm4OcQGTIH2jKFN7yQnVP8+voi3azGboJYa7XfwjUis3buzAOG/DfA95luUxcQSbOxunuKY0Neh8jwrmmR21rn/9czdkx0f5BWJY2Jh/dy3ooXRJF5iGzFYa/3gWCTC8SOGteOm55t+nZczdwwn+sLpCxZHuYFkcXReN+Poyg9bzOOrS87EneLJGI2Acy3Bqj3VONaPnd9tWIBnqGssWuPS8eTqSk3hPUOp6qg/bCTzI2T/6V9C5oB8P2TeSxxpm6fiXeP+86QIYWUvxjliF7NJdL/svbC+RyuCNu7U4ZYw1aQjmpIoidPOeWa08oDtt4RgQAzfijalC/Glu031V8Iw0risSmKFPrjkd4E/19lc0WhZIQJnivrer0wky2i/ZxBxI/BmO6GIyFSFTm7weIcLOzNHZ3Nax3x6LL+XfLafsidVuC5C48Tkx0ApYwc8eMCQCvxJrT4xcXMpjtdcDVJgItWl6xHWNST789m2Yf1cOWUzcvXqxsQi7mfv0sFC2gotsAe2sKoBoqf76fBZAVzuvu8plL5wAUYaNPAGsf4cKZzuw=
before_script:
- git config --global user.name rmpestano
- git config --global user.email rmpestano@gmail.com
script:
- mvn clean install jacoco:report coveralls:report -Pcoverage surefire-report:report-only
  && python html2text.py target/site/surefire-report.html
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  mvn sonar:sonar -Psonar -Dsonar.organization=database-rider -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=${SONAR_TOKEN} ; fi ;
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd rider-core && mvn -q cukedoctor:execute scm-publish:publish-scm -Pdocs ; fi ;
- if [[ $TRAVIS_COMMIT_MESSAGE == *"prepare release"* ]]; then mvn -q cukedoctor:execute
  scm-publish:publish-scm -Pdocs -Prelease ; fi ;
after_script:
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd ../ && mvn clean package deploy --settings settings.xml -DskipTests=true ; fi;
