dist: trusty
sudo: required
language: java
jdk: oraclejdk8
cache:
  directories:
  - "$HOME/.m2/repository"
services:
- docker
env:
  global:
  - secure: FpkvCRryICAVwOjNn3JK8JWzSxXm3TToEAz6f85Y9xlrprL5C6b0Pf85gzzonlldHMnJzB0pukC+35NWDv1/iKXth5Pk7IJvEcKPkqBYLPHXXjqvnOdm7oLwPh4E+fDPIciTbuTIkbYPRSWMq7hpXnFh1iFsMq2Ty1BfPQAUdFRMj+Lm8cbHh0oDeVkPDdqfY3HJE0I0GfCYpNwUgdfvzbRleNznkMa3U0z8OFQDpN4llkjulArICb4UV4zjpWBJY8yl9BYMqpvKRal0qeZK9Rmh/MzgF258MXbAKh2Swo5iEjLTzNO5IYUyNutAttrqz6qdMSy7i+IBISCcw0I1wxGYZD0639wqekiPN/Jg+9FdlavAXzQSw3cVzklmyujif86Eq2Ib+nfNHHmnBPGLrrRNPC3gwWKgdzGLS+cDT11w6rUAXc/9/kilPocyplM7QgFzu5Dz/PzTBkdN9HJRcNB2SPTDEKgndQl2+ckkZqOgGZB+Gcqf8niXW099F+w0+i2V7yb9Qb+39dIfOtud8trkBpB7bVbzjBRyiwmzTJe9Seygk4zDLLTto6ev3KxRCV/T3J6+37bD/WSbrfFKdiY3UCXuC3eit+zvmoDFKs//nXdUhjLowYCOt8TPXCSpH+fVIiGjCHr0/5f1fVnoncLO1pJSALdIMyssSDq5e3w=
  - secure: aCoBB0MwU48Zxwfg7uZrVocADOa4hVCvjPXnynQ8ehYOlabtWFMOFrgozV+rMsMH4WlnYilwUweUsNH6bTeKV9ANfaznbu5uW5Dt0qCQKVlxK3WNqjOYx7TL7mRVpguAXvha+HADj1QirXIc8G72AGDMT1jFJV/IzxZ0JeA9+6M2x4e7cadBZ4dyhkXOWBZOjCn2HO3r29ubS0YH5tn+bohIQepaZ5ikyY18wZtSmOislopTrQvjnUpuZEqmqFVdekP7H6jSkLYCYZVguFk2ithGsmLfVdt2T186DLrUGdGSTxNJBLs5inFrcxNa4BB7JdVYf9hB1aGICx7fCW9UQDCYcVgQruWtYkBN77VdR9O6Q6DaQUjUI0uvt+gZ3OMaJPCEEdBcW8sJnNB/tnK4f7HgheKaixhsKNzJ50yKTHkWUIYRIBuXcX7sLzKs2JDRFEdMbxDPk94sDaDliprd1SglSLeGiibp5ZxoQ2ZcKrsLsvRWPPlQwMBou7WgVP8WTtYU2+fcgDa1Apo+VuH9kkTBAhxQja+PvmNfGkqZ5d8jFpyf3SYNiiVZEF3nJBmGsRIq1B8jfecEKnwnELwdziK53jm47YgKBrfC4ifafMkbb9Ua4LtLKPZDmnig7gPZxPRq3ZgakIOoBP2FWfVAuGp01gpBa4gwv4XOYX0NW40=
  - secure: pYvVWSjT2Islizh2mjs3KkEqpr6qM+A1ZkunjpBxIgSv/sbHS8MZSRnP7MCas3R+rmBU/aLbp2LZKvqGPXkN6t9zvEi2jBYcRxbqK18vMSXV9RZ1jAv7hKWwP/EI32OFpl8HS5JeNCLpFhD4daGRtSBef0yfkyym1o8BlzlEfSXHr7BWDqcyuLfqVP/KUPbBCZct/mkPcEOPyuxshLPQyMuTTjL2KlJfNi8WADKnm+TGz4BHKe+Kz+ouo5yMmUPbV3tV98VJZaB2c34Ekc0jTLYFq+cifnGDyoJLYv9jyxDPDL2aVbdhIs4W0ydkWObtL/h+R0smJZVMfq/sZb94w10z0n0kMPYIEIRZdq8mEoBbp8u+/GpiBCbuvQ1hPrZXMkYcG4R7TI4qpOud7hGN2KOc+W3GOV5n5Ghc3EEkfDPD2wbwv17KmCpDbDsvkbRjIEmWc3e9Ilh/QciBXnvhirDORLyT4zUy7P51vo1KIYQUED5auvaLVkAuY9sK8f0AR+OP1+L5Al136/P4/Eq7MV+ttmCYN5pUMn9S82EDiKGaU4/FLFw7g18dN1LrUdIZLxZ3nXWAR7rCnXwx76s0uegs6e8ShDa70RBBEq8XmXA5aB3WQSeW1fLLpo3+aKrSDCrKh4pGgSrCFrlRrR48R3Xk67X65264VoNKdsyPASE=
  - secure: EegSzFR4KsLAH0Bup0ap2TidEu8lUTOU+dPsoJKjBaoDP3YJJwowfoAigWJFvD2qTCcAVPyY4y+hbVnuONQVHTHBAev5iDkc13JOTOTNJn4feWBhJefknUuXh+FcyEz/mb6HWeHS6ZtZWKAL7EMZfspxvLKGnEAFTqGjPGAnMQ4dq7hBfA2FG3yoE0eM3P36T394XqDNukUWY6UEfPnW/f1n4r2TBM6DcVA2tfSXgbHeRI8HvkEKTOG6oC/N90LI/g1wWLOOJnlQuMqMT7k2pgeM/gKKttiU1InarySsXsndrpIu9KjRkbUbGJaJqkjqG6G+NeACD5n88eM0u+eqCHfoLdUu+yG/CZSHgcLFMYHbhaFQ2Cc8HO765Nb+crsprSQ0Rym8GZn1WU5oOdvfk02iUarB3kBeWA2t8d0Iz4hnEMXqm7TE2Wbj9E49yl+qcYTNviP0C6Y9Z4ZmcV7/02cjvpz1r11JARlMpOlGszmcRxOq6t7cVXWDIrebX2E1oM0rhoa89AxZC38z9EFoAif7N3VyQJ3jp91J20S5eilns+KX8lmhNi/wyosMZrcyLRGquse3Uh2yDHjGTpNVNQIfHNLKWM4ZfRKf3kDB2ScXx/DdqRwKPhTyGwhDg1ghYGQ2eZk1bSTxuSPkHiNPmPDPM+rev2hiDFQTMNKovs8=
before_script:
- git config --global user.name rmpestano
- git config --global user.email rmpestano@gmail.com
script:
- mvn clean install jacoco:report coveralls:report -Pcoverage surefire-report:report-only
  && python html2text.py target/site/surefire-report.html
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  mvn sonar:sonar -Psonar -Dsonar.organization=database-rider -Dsonar.host.url=https://sonarcloud.io
  -Dsonar.login=${SONAR_TOKEN} ; fi ;
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd rider-core && mvn -q cukedoctor:execute scm-publish:publish-scm -Pdocs ; fi ;
- if [[ $TRAVIS_COMMIT_MESSAGE == *"prepare release"* ]]; then mvn -q cukedoctor:execute
  scm-publish:publish-scm -Pdocs -Prelease ; fi ;
after_script:
- if [[ $TRAVIS_PULL_REQUEST == "false" ]] && [[ $TRAVIS_BRANCH == "master" ]]; then
  cd ../ && mvn clean package deploy --settings settings.xml -DskipTests=true ; fi;
